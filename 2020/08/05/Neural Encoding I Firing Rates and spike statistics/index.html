<!DOCTYPE html>
<html>
<head hexo-theme='https://github.com/volantis-x/hexo-theme-volantis/tree/4.0.0-rc.2'>
  <meta charset="utf-8">
  <!-- SEO相关 -->
  
    
  
  <!-- 渲染优化 -->
  <meta name="renderer" content="webkit">
  <meta name="force-rendering" content="webkit">
  <meta http-equiv="X-UA-Compatible" content="IE=Edge,chrome=1">
  <meta name="HandheldFriendly" content="True" >
  <meta name="apple-mobile-web-app-capable" content="yes">
  <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1">

  <!-- 页面元数据 -->
  
  <title>Neural Encoding I Firing Rates and spike statistics - Eichide&#39;s Blog</title>
  
    <meta name="keywords" content="nuron">
  

  
    <meta name="description" content="!!! note
1. Neural Encoding I Firing Rates and spike statistics
1.1. introduction

neural encode : stimulus --&gt; response
neural decode : response --&...">
  

  <!-- feed -->
  

  <!-- import meta -->
  

  <!-- link -->
  
    
<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/@fortawesome/fontawesome-free@5.14/css/all.min.css">

  
  

  

  

  

  

  <!-- import link -->
  

  
  
    
<link rel="stylesheet" href="/css/style.css">

  
  
  
  <!-- 脚本懒加载函数 -->
  <script>
  function loadScript(src, cb) {
    var HEAD = document.getElementsByTagName('head')[0] || document.documentElement;
    var script = document.createElement('script');
    script.setAttribute('type','text/javascript');
    if (cb) script.onload = cb;
    script.setAttribute('src', src);
    HEAD.appendChild(script);
  }
  //https://github.com/filamentgroup/loadCSS
  !function(c){"use strict";var e=function(e,t,n,r){var o,i=c.document,a=i.createElement("link");if(t)o=t;else{var d=(i.body||i.getElementsByTagName("head")[0]).childNodes;o=d[d.length-1]}var f=i.styleSheets;if(r)for(var l in r)r.hasOwnProperty(l)&&a.setAttribute(l,r[l]);a.rel="stylesheet",a.href=e,a.media="only x",function e(t){if(i.body)return t();setTimeout(function(){e(t)})}(function(){o.parentNode.insertBefore(a,t?o:o.nextSibling)});var s=function(e){for(var t=a.href,n=f.length;n--;)if(f[n].href===t)return e();setTimeout(function(){s(e)})};function u(){a.addEventListener&&a.removeEventListener("load",u),a.media=n||"all"}return a.addEventListener&&a.addEventListener("load",u),(a.onloadcssdefined=s)(u),a};"undefined"!=typeof exports?exports.loadCSS=e:c.loadCSS=e}("undefined"!=typeof global?global:this);
  </script>
  <script id="loadcss"></script>
</head>

<body>
  <header class="l_header auto shadow blur" style='opacity: 0' >
  <div class='container'>
  <div class='wrapper'>
    <div class='nav-sub'>
      <p class="title"></p>
      <ul class='switcher nav-list-h m-phone' id="pjax-header-nav-list">
        <li><a class="s-comment fas fa-comments fa-fw" target="_self" href='javascript:void(0)'></a></li>
        
          <li><a class="s-toc fas fa-list fa-fw" target="_self" href='javascript:void(0)'></a></li>
        
      </ul>
    </div>
		<div class="nav-main">
      
        
        <a class="title flat-box" target="_self" href='/'>
          
            <img no-lazy class='logo' src='https://cdn.jsdelivr.net/gh/volantis-x/cdn-org/blog/Logo-NavBar@3x.png'/>
          
          
          
        </a>
      

			<div class='menu navigation'>
				<ul class='nav-list-h m-pc'>
          
          
          
            
            
              <li>
                <a class="menuitem flat-box faa-parent animated-hover" href=/
                  
                  
                  
                    id="home"
                  >
                  <i class='fas fa-rss fa-fw'></i>博客
                </a>
                
              </li>
            
          
          
            
            
              <li>
                <a class="menuitem flat-box faa-parent animated-hover" href=/categories/
                  
                  
                  
                    id="categories"
                  >
                  <i class='fas fa-folder-open fa-fw'></i>分类
                </a>
                
              </li>
            
          
          
            
            
              <li>
                <a class="menuitem flat-box faa-parent animated-hover" href=/tags/
                  
                  
                  
                    id="tags"
                  >
                  <i class='fas fa-tags fa-fw'></i>标签
                </a>
                
              </li>
            
          
          
            
            
              <li>
                <a class="menuitem flat-box faa-parent animated-hover" href=/archives/
                  
                  
                  
                    id="archives"
                  >
                  <i class='fas fa-archive fa-fw'></i>归档
                </a>
                
              </li>
            
          
          
            
            
              <li>
                <a class="menuitem flat-box faa-parent animated-hover" href=/friends/
                  
                  
                  
                    id="friends"
                  >
                  <i class='fas fa-link fa-fw'></i>友链
                </a>
                
              </li>
            
          
          
            
            
              <li>
                <a class="menuitem flat-box faa-parent animated-hover" href=/about/
                  
                  
                  
                    id="about"
                  >
                  <i class='fas fa-info-circle fa-fw'></i>关于
                </a>
                
              </li>
            
          
          
				</ul>
			</div>

      <div class="m_search">
        <form name="searchform" class="form u-search-form">
          <i class="icon fas fa-search fa-fw"></i>
          <input type="text" class="input u-search-input" placeholder="Search..." />
        </form>
      </div>

			<ul class='switcher nav-list-h m-phone'>
				
					<li><a class="s-search fas fa-search fa-fw" target="_self" href='javascript:void(0)'></a></li>
				
				<li>
          <a class="s-menu fas fa-bars fa-fw" target="_self" href='javascript:void(0)'></a>
          <ul class="menu-phone list-v navigation white-box">
            
              
            
              <li>
                <a class="menuitem flat-box faa-parent animated-hover" href=/
                  
                  
                  
                    id="home"
                  >
                  <i class='fas fa-rss fa-fw'></i>博客
                </a>
                
              </li>
            
          
            
              
            
              <li>
                <a class="menuitem flat-box faa-parent animated-hover" href=/categories/
                  
                  
                  
                    id="categories"
                  >
                  <i class='fas fa-folder-open fa-fw'></i>分类
                </a>
                
              </li>
            
          
            
              
            
              <li>
                <a class="menuitem flat-box faa-parent animated-hover" href=/tags/
                  
                  
                  
                    id="tags"
                  >
                  <i class='fas fa-tags fa-fw'></i>标签
                </a>
                
              </li>
            
          
            
              
            
              <li>
                <a class="menuitem flat-box faa-parent animated-hover" href=/archives/
                  
                  
                  
                    id="archives"
                  >
                  <i class='fas fa-archive fa-fw'></i>归档
                </a>
                
              </li>
            
          
            
              
            
              <li>
                <a class="menuitem flat-box faa-parent animated-hover" href=/friends/
                  
                  
                  
                    id="friends"
                  >
                  <i class='fas fa-link fa-fw'></i>友链
                </a>
                
              </li>
            
          
            
              
            
              <li>
                <a class="menuitem flat-box faa-parent animated-hover" href=/about/
                  
                  
                  
                    id="about"
                  >
                  <i class='fas fa-info-circle fa-fw'></i>关于
                </a>
                
              </li>
            
          
            
          </ul>
        </li>
			</ul>
		</div>
	</div>
  </div>
</header>

  <div class="l_body">
    <div class="l_cover">

  
  
      <div class='cover-wrapper post dock' style="display: none;">
        
          <div class='cover-bg lazyload placeholder' data-bg="https://cdn.jsdelivr.net/gh/volantis-x/cdn-wallpaper-minimalist/2020/033.jpg"></div>
        
        <div class='cover-body'>
  <div class='top'>
    
    
      <p class="title">Volantis</p>
    
    
  </div>
  <div class='bottom'>
    <div class='menu navigation'>
      <div class='list-h'>
        
          
            <a href="/v4/getting-started/"
              
              
              id="v4getting-started">
              <img src='https://cdn.jsdelivr.net/gh/twitter/twemoji@13.0/assets/svg/1f5c3.svg'><p>文档</p>
            </a>
          
            <a href="/faqs/"
              
              
              id="faqs">
              <img src='https://cdn.jsdelivr.net/gh/twitter/twemoji@13.0/assets/svg/1f516.svg'><p>帮助</p>
            </a>
          
            <a href="/examples/"
              
              
              id="examples">
              <img src='https://cdn.jsdelivr.net/gh/twitter/twemoji@13.0/assets/svg/1f396.svg'><p>示例</p>
            </a>
          
            <a href="/contributors/"
              
              
              id="contributors">
              <img src='https://cdn.jsdelivr.net/gh/twitter/twemoji@13.0/assets/svg/1f389.svg'><p>社区</p>
            </a>
          
            <a href="/archives/"
              
              
              id="archives">
              <img src='https://cdn.jsdelivr.net/gh/twitter/twemoji@13.0/assets/svg/1f4f0.svg'><p>博客</p>
            </a>
          
            <a href="https://github.com/volantis-x/hexo-theme-volantis/"
              
              
              id="https:githubcomvolantis-xhexo-theme-volantis">
              <img src='https://cdn.jsdelivr.net/gh/twitter/twemoji@13.0/assets/svg/1f9ec.svg'><p>源码</p>
            </a>
          
        
      </div>
    </div>
  </div>
</div>

        <div class="scroll-down" style="display: none;"><i class="fa fa-chevron-down scroll-down-effects"></i></div>
      </div>
  

</div>

    <div class='safearea'>
      <div class='body-wrapper' id="pjax-container">
        
          <!--此文件用来存放一些不方便取值的变量-->
<!--思路大概是将值藏到重加载的区域内-->



<div id="pjax-data" style="display: none">
  <div id="pjax-ispage">true</div>
  <div id="pjax-pageTitle">Neural Encoding I Firing Rates and spike statistics</div>
  <div id="pjax-enable-cover">true</div>
  <div id="pjax-comment-path"></div>
  <div id="pjax-comment-placeholder"></div>
</div>


<script>
  // 处理封面 此时 jquery 还没加载
  if ("none" == "none") { // 移除封面
    document.getElementsByClassName('cover-wrapper')[0].style.display = "none";
    document.getElementsByClassName('l_header', 'cover-wrapper')[0].classList.add("show");
  } else {
    if ("none" == "half") { // 半屏
      document.getElementsByClassName('cover-wrapper')[0].setAttribute('id', 'half');
      document.getElementsByClassName('scroll-down')[0].style.display = "none";
    } else if ("none" == "full") { // 全屏
      document.getElementsByClassName('cover-wrapper')[0].setAttribute('id', 'full');
      document.getElementsByClassName('scroll-down')[0].style.display = "";
    }
    document.getElementsByClassName('cover-wrapper')[0].style.display = "";
    document.getElementsByClassName('l_header', 'cover-wrapper')[0].classList.remove("show");
  }
</script>


        
        

<div class='l_main'>
  <article class="article post white-box reveal md shadow article-type-post" id="post" itemscope itemprop="blogPost">
  


  
  <div class="article-meta" id="top">
    
    
    
      <h1 class="title">
        Neural Encoding I Firing Rates and spike statistics
      </h1>
      <div class='new-meta-box'>
        
          
            
<div class='new-meta-item author'>
  <a class='author' href="https://github.com/volantis-x/" rel="nofollow">
    <img no-lazy src="https://cdn.jsdelivr.net/gh/volantis-x/cdn-org/blog/favicon/apple-touch-icon.png">
    <p>Volantis Team</p>
  </a>
</div>

          
        
          
            
  <div class='new-meta-item category'>
    <a class='notlink'>
      <i class="fas fa-folder-open fa-fw" aria-hidden="true"></i>
      <a class="category-link" href="/categories/neuron/">neuron</a>
    </a>
  </div>


          
        
          
            <div class="new-meta-item date">
  <a class='notlink'>
    <i class="fas fa-calendar-alt fa-fw" aria-hidden="true"></i>
    <p>发布于：Aug 5, 2020</p>
  </a>
</div>

          
        
          
            
  <div class="new-meta-item browse leancloud">
    <a class='notlink'>
      
      <div id="lc-pv" data-title="Neural Encoding I Firing Rates and spike statistics" data-path="/2020/08/05/Neural%20Encoding%20I%20Firing%20Rates%20and%20spike%20statistics/">
        <i class="fas fa-eye fa-fw" aria-hidden="true"></i>
        <span id='number'><i class="fas fa-circle-notch fa-spin fa-fw" aria-hidden="true"></i></span>
        次浏览
      </div>
    </a>
  </div>


          
        
      </div>
    
  </div>


  
  
  <p>!!! note</p>
<h1 id="neural-encoding-i-firing-rates-and-spike-statistics">1. Neural Encoding I Firing Rates and spike statistics</h1>
<h2 id="introduction">1.1. introduction</h2>
<ol type="1">
<li>neural encode : stimulus --&gt; response</li>
<li>neural decode : response --&gt; stimulus , need reconstruct stimulus or certain aspects of stimuls</li>
</ol>
<a id="more"></a>
<h2 id="recording-neuronal-responses">1.2. Recording Neuronal Responses</h2>
<ul>
<li>intracellular recording</li>
</ul>
<p>the important point that spikes, but not subthreshold potentials, propagate regeneratively down axons.</p>
<p>The subthreshold membrane potential waveform, apparent in the soma recording, is completely absent on the axon due to attenuation, but the action potential sequence in the two recordings is the same.</p>
<ul>
<li>extracellular electrodes</li>
</ul>
<p>==Such recordings can reveal the action potentials ?red by a neuron, but not its subthreshold membrane potentials.==</p>
<figure>
<img src="/2020/08/05/Neural%20Encoding%20I%20Firing%20Rates%20and%20spike%20statistics/three%20simulated%20recoding%20from%20a%20neuron.png" class="lazyload" data-srcset="/2020/08/05/Neural%20Encoding%20I%20Firing%20Rates%20and%20spike%20statistics/three%20simulated%20recoding%20from%20a%20neuron.png" srcset="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAABGdBTUEAALGPC/xhBQAAADhlWElmTU0AKgAAAAgAAYdpAAQAAAABAAAAGgAAAAAAAqACAAQAAAABAAAAAaADAAQAAAABAAAAAQAAAADa6r/EAAAAC0lEQVQIHWNgAAIAAAUAAY27m/MAAAAASUVORK5CYII=" alt><figcaption>Three simulated recordings from a neuron</figcaption>
</figure>
<h2 id="from-stimulus-to-response">1.3. From stimulus to response</h2>
<p>==Isolating features of the response that encode changes in the stimulus can be dif?cult, especially if the time scale for these changes is of the same order as the average interval between spikes.==</p>
<h3 id="fire-pattern">1.3.1. fire pattern</h3>
<ul>
<li>individual neurons</li>
<li>population pattern of responding cells</li>
</ul>
<h2 id="spike-trains-and-firing-rates">1.4. Spike Trains and Firing Rates</h2>
<p>==the sequence of action potentials generated may be characterized by <strong>firing rates,</strong> rather than as <strong>specific spike sequences</strong>.==</p>
<p>计算rate的前提是要先计算出spike发生的时间点,然后再计算spike频率.</p>
<p>==spike可以认为是wave的每一个peak对应的时间点,也可以认为是AP起始时间点==</p>
<ul>
<li><p>neural response function</p>
<p>n is the total number of spikes in the spike train,t<sub>i</sub> are the times that each spike occurred.</p>
<p><span class="math display">\[\rho(t)=\sum_{i=1}^{n} \delta\left(t-t_{i}\right)\]</span></p>
<p><span class="math display">\[\sum_{i=1}^{n} h\left(t-t_{i}\right)=\int_{-\infty}^{\infty}d\tau h(\tau)\rho(t-\tau)\]</span></p></li>
<li><p>spike count (n) , the number of spikes ?red between times t<sub>1</sub> and t<sub>2</sub></p>
<p><span class="math display">\[n =\int_{t_{1}}^{t_{2}} \rho(t) d t \]</span> <span class="math display">\[&lt;n&gt; = \int_{t_{1}}^{t_{2}} r(t) d t\]</span></p>
<hr></li>
</ul>
<h3 id="spike-rate">1.4.1. spike rate</h3>
<ol type="1">
<li><p>spike-count rate (r) -- <strong>spike-count rate</strong> <span class="math display">\[r=\frac{n}{T}=\frac{1}{T} \int_{0}^{T} d \tau \rho(\tau)\]</span></p>
<p>ρ(t) the neural response function . 表征T内的spikes 时间分布</p>
<p>T duration of the trial.</p>
<p>n fire number during trial</p>
<p>The spike-count rate can be determined from a single trial, but at the expense of <strong>losing all temporal resolution</strong> about variations in the neural response during the course of the trial.</p></li>
</ol>
<hr>
<ol start="2" type="1">
<li>time-dependent firing rate r(t) -- <strong>instantaneous ?ring rate</strong></li>
</ol>
<p><span class="math display">\[r(t)=\frac{1}{\Delta t} \int_{t}^{t+\Delta t} d \tau\langle\rho(\tau)\rangle\]</span></p>
<pre><code>&lt; &gt; trial average . averages over trials that use the same stimulus, so that &lt;z&gt; for any quantity z is the sum of the values of z obtained from many trials involving the same stimulus, divided by the number of trials. The trial-averaged neural response function is denoted by &lt;ρ(t)&gt;

value of Δt **must be large enough** so there are suf?cient numbers of spikes within the interval de?ning r (t) to obtain a reliable estimate of the average.

a short interval of duration Δt around the time t.</code></pre>
<hr>
<ol start="3" type="1">
<li><p>average ?ring rate -- <strong>average firing rate</strong></p>
<p><span class="math display">\[\langle r\rangle=\frac{\langle n\rangle}{T}=\frac{1}{T} \int_{0}^{T} d \tau\langle\rho(\tau)\rangle=\frac{1}{T} \int_{0}^{T} d t r(t)\]</span></p>
<h2 id="firing-rate-spike-count-rate-and-average-firing-rate">“firing rate”, “spike-count rate”, and “average firing rate”</h2></li>
</ol>
<h3 id="measuring-firing-rates---rt">1.4.2. Measuring Firing Rates --r(t)</h3>
<figure>
<img src="/2020/08/05/Neural%20Encoding%20I%20Firing%20Rates%20and%20spike%20statistics/firing%20rates%20approximated%20by%20different%20procedure.png" class="lazyload" data-srcset="/2020/08/05/Neural%20Encoding%20I%20Firing%20Rates%20and%20spike%20statistics/firing%20rates%20approximated%20by%20different%20procedure.png" srcset="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAABGdBTUEAALGPC/xhBQAAADhlWElmTU0AKgAAAAgAAYdpAAQAAAABAAAAGgAAAAAAAqACAAQAAAABAAAAAaADAAQAAAABAAAAAQAAAADa6r/EAAAAC0lEQVQIHWNgAAIAAAUAAY27m/MAAAAASUVORK5CYII=" alt><figcaption>f</figcaption>
</figure>
<ol type="1">
<li><p>bin method</p>
<p>divide time into discrete bins of duration Δt, count the number of spikes within each bin,and divide by Δt.</p>
<ul>
<li><p>对每个bin计算spike-count rate -- r, 构成 r(t) . 因为最小单位是1/Δt,所以是离散值</p></li>
<li><p>受bin的size和bin的起始位置影响</p></li>
</ul></li>
<li><p>slide window -- <strong>sum</strong></p>
<p>假定n 个spikes的时间分别为t1,t2,...,tn, slide widow 的 width 为 Δt</p>
<p>那么近似的rate为:</p>
<p><span class="math display">\[r_{\text {approx }}(t)=\sum_{i=1}^{n} w\left(t-t_{i}\right)\]</span></p>
<p>其中 window function 为:</p>
<p><span class="math display">\[w(t)=\left\{\begin{array}{ll}
 1 / \Delta t &amp; \text { if }-\Delta t / 2 \leq t&lt;\Delta t / 2 \\
 0 &amp; \text { otherwise }
 \end{array}\right.\]</span></p>
<ul>
<li>不受bin的起始位置影响</li>
<li>离散的,最小单位1/Δt</li>
<li>时间分辨率更高,但还是受one bin影响</li>
</ul></li>
<li><p>slide window -- <strong>integral</strong></p>
<p><span class="math display">\[r_{\text {approx }}(t)=\int_{-\infty}^{\infty} d \tau w(\tau) \rho(t-\tau)\]</span> <span class="math display">\[w(\tau)=\frac{1}{\sqrt{2 \pi} \sigma_{w}} \exp \left(-\frac{\tau^{2}}{2 \sigma_{w}^{2}}\right)\]</span></p>
<p><span class="math inline">\(r_{\text {approx }}(t)\)</span>是linear filter</p>
<p>window function w 是 filter kernel</p>
<ol type="1">
<li>Gaussion function</li>
</ol>
<p><span class="math display">\[w(\tau)=\frac{1}{\sqrt{2 \pi} \sigma_{w}} \exp \left(-\frac{\tau^{2}}{2 \sigma_{w}^{2}}\right)\]</span></p>
<ul>
<li>得到平滑的rate曲线</li>
<li><span class="math inline">\(\sigma_{w}\)</span> 控制the temporal resolution of the resulting rate, 类似于Δt . 越小越高</li>
</ul>
<ol start="2" type="1">
<li>alpha window (Casual)</li>
</ol>
<p><span class="math display">\[w(\tau)=\left[\alpha^{2} \tau \exp (-\alpha \tau)\right]_{+}\]</span></p>
<p><span class="math display">\[[z]_{+}=\left\{\begin{array}{ll}
 z &amp; \text { if } z \geq 0 \\
 0 &amp; \text { otherwise }
 \end{array}\right.\]</span></p>
<ul>
<li>仅当τ&gt;0 时,考虑进去</li>
<li>认为在t时刻之后发放的不符合因果关系, 在t时刻之前发放的才考虑进去</li>
</ul></li>
</ol>
<h3 id="turning-curve">1.4.3. turning curve</h3>
<p>fit with different function</p>
<h2 id="what-make-a-neuron-fire">1.5. What make a neuron fire</h2>
<ul>
<li><p>Weber's law</p></li>
<li><p>Fechner's law</p>
<p>https://en.wikipedia.org/wiki/Weber%E2%80%93Fechner_law</p>
<hr></li>
<li><p>time average</p></li>
<li><p>stimuls average</p>
<hr></li>
<li><p>fire : firing of an action potential</p></li>
<li><p>spike :</p></li>
<li><p>spike train: extracellular spike trains mainly reflect the timing of the occurrence of an action potential.</p>
<hr></li>
<li><p>spike target average 平均刺激的波形(不是响应的波形)</p></li>
</ul>
<p><span class="math display">\[C(\tau)=\left\langle\frac{1}{n} \sum_{i=1}^{n} s\left(t_{i}-\tau\right)\right\rangle \approx \frac{1}{\langle n\rangle}\left\langle\sum_{i=1}^{n} s\left(t_{i}-\tau\right)\right\rangle\]</span></p>
<p><span class="math display">\[C(\tau)=\frac{1}{\langle n\rangle} \int_{0}^{T} d t\langle\rho(t)\rangle s(t-\tau)=\frac{1}{\langle n\rangle} \int_{0}^{T} d t r(t) s(t-\tau)\]</span></p>
<figure>
<img src="/2020/08/05/Neural%20Encoding%20I%20Firing%20Rates%20and%20spike%20statistics/spike_target_ave9.png" class="lazyload" data-srcset="/2020/08/05/Neural%20Encoding%20I%20Firing%20Rates%20and%20spike%20statistics/spike_target_ave9.png" srcset="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAABGdBTUEAALGPC/xhBQAAADhlWElmTU0AKgAAAAgAAYdpAAQAAAABAAAAGgAAAAAAAqACAAQAAAABAAAAAaADAAQAAAABAAAAAQAAAADa6r/EAAAAC0lEQVQIHWNgAAIAAAUAAY27m/MAAAAASUVORK5CYII=" alt><figcaption>spike target average</figcaption>
</figure>
<ul>
<li><strong>correlation function</strong> of the ?ring rate and the stimulus</li>
</ul>
<p><span class="math display">\[Q_{\mathrm{rs}}(\tau)=\frac{1}{T} \int_{0}^{T} d t r(t) s(t+\tau)\]</span></p>
<ul>
<li>because of : <span class="math inline">\(\langle r\rangle=\langle n\rangle / T\)</span> ,thus:</li>
</ul>
<p><span class="math display">\[C(\tau)=\frac{1}{\langle r\rangle} Q_{\mathrm{rs}}(-\tau)\]</span></p>
<ul>
<li><p>white-noise</p>
<p>随机性: The defining characteristic of a white-noise stimulus is that its value at any one time is uncorrelated with its value at any other time.</p>
<p>For white noise, the stimulus autocorrelation function is 0 in the range ?T/2 &lt; τ &lt; T/2 except when τ = 0.</p>
<p><span class="math display">\[Q_{s s}(\tau)=\sigma_{s}^{2} \delta(\tau)\]</span></p>
<p>==Approximations of white noise that are missing high-frequency components can be used, provided the missing frequencies are well above the sensitivity of the neuron under investigation.==</p>
<p>==Similarly, the binning of time into discrete intervals of size Δt means that the noise generated has a ?at power spectrum only up to frequencies of order 1/(2Δt).==</p></li>
<li><p>autocorrelation function -- 刺激与刺激的</p>
<p><span class="math display">\[Q_{s s}(\tau)=\frac{1}{T} \int_{0}^{T} d t s(t) s(t+\tau)\]</span></p></li>
<li><p>spike-train autocorrelation function --响应与响应的</p>
<p><span class="math display">\[Q_{\rho \rho}(\tau)=\frac{1}{T} \int_{0}^{T} d t\langle(\rho(t)-\langle r\rangle)(\rho(t+\tau)-\langle r\rangle)\rangle\]</span></p></li>
</ul>
<h2 id="spike-train-statistics">1.6. Spike-Train Statistics</h2>
<h3 id="homogeneous-poisson-process">1.6.1. Homogeneous Poisson Process</h3>
<p><span class="math display">\[P\left[t_{1}, t_{2}, \ldots, t_{n}\right]=n ! P_{T}[n]\left(\frac{\Delta t}{T}\right)^{n}\]</span></p>
<ul>
<li>泊松过程 <span class="math display">\[P\{1 \text { spike during the interval }(t, t+\Delta t)\}=r(t) \Delta t \tag{1.6.1.1}\]</span></li>
</ul>
<p><span class="math display">\[P\{n \text { spikes during } \Delta t\}=\frac{k !}{(k-n) ! n !} p^{n} q^{k-n}=e^{-r \Delta t} \frac{(r \Delta t)^{n}}{n !}\]</span></p>
<ul>
<li><p>方差</p>
<p><span class="math display">\[\sigma_{n}^{2}=r \Delta t\]</span></p></li>
<li><p>Fano factor : mean spike count over a given interval and the spike-count variance</p></li>
</ul>
<p><span class="math display">\[F=\frac{\sigma_{n}^{2}}{\langle n\rangle}=1\]</span></p>
<ul>
<li>interval τ</li>
</ul>
<p><span class="math display">\[P\{\text { next spike occurs after } \tau\}=e^{-r \tau}\tag{1.6.1.2}\]</span></p>
<p><span class="math display">\[P\{\text { next spike occurs before } \tau\}=1-e^{-r \tau}\]</span></p>
<p><span class="math display">\[p(\tau)=\frac{d}{d t}\left(1-e^{-r \tau}\right)=r e^{-r \tau}\]</span></p>
<p><span class="math display">\[\langle\tau\rangle=\int_{0}^{\infty} \tau p(\tau) d \tau=\frac{1}{r}\]</span></p>
<p><span class="math display">\[\sigma_{\tau}^{2}=\int_{0}^{\infty} \tau^{2} p(\tau) d \tau-\langle\tau\rangle^{2}=\frac{1}{r^{2}}\]</span></p>
<p><span class="math display">\[C_{V}=\frac{\sigma_{\tau}}{\langle\tau\rangle}=1\]</span></p>
<h3 id="inhomogeneous-poisson-process">1.6.2. Inhomogeneous Poisson Process</h3>
<p><span class="math display">\[p\left[t_{1}, t_{2}, \ldots, t_{n}\right]=\exp \left(-\int_{0}^{T} d t r(t)\right) \prod_{i=1}^{n} r\left(t_{i}\right)\]</span></p>
<h3 id="generating-poisson-spike-train">Generating Poisson Spike Train</h3>
<p><span class="math inline">\({r_{est}}\)</span>是根据stimulus估计的spike rate ,可以由 response turning curve得到</p>
<h4 id="poisson-spike-generator">poisson spike generator</h4>
<ol type="1">
<li><p>ﬁrst approach -- 基于<a href="#161-homogeneous-poisson-process">(1.6.1.1)</a></p>
<p>Δt足够小,大约1ms,以至于Δt时间内最多只能发生一次spike,即二项分布</p>
<p><span class="math display">\[P\{1 \text { spike during } \Delta t\} \approx r_{est } \Delta t\]</span></p>
<p>generate a sequence of random numbers x [ i ], uniformly distributed between 0 and 1. For each interval, if x [ i ] &lt;=rΔt, generate a spike.</p></li>
<li><p>second approach -- 基于<a href="#161-homogeneous-poisson-process">(1.6.1.2)</a></p>
<p><span class="math display">\[\tau =-\ln \left(x_{\text {rand }}\right) / r_{est }\]</span></p>
<p>只适用于r(t)==r 恒定速率</p></li>
<li><p>third approach --基于方法2</p>
<p>设定一个最大spike rate 值 r <sub>max</sub> ,用这个值产生的时间间隔比 r(t) 小 ,因此理论上产生的spike数目会偏多,那么就要放弃一些</p>
<p><span class="math display">\[\tau = -\ln \left(x_{\text {rand }}\right) / r_{\text {max }}\]</span></p>
<p>再产生一个0-1的随机数,x<sub>rand</sub>[i],如果<span class="math inline">\(r_{\text {est }}\left(t_{i}\right) / r_{\max }&lt;x_{\text {rand }}\left( i\right)\)</span> ,则接受该spike,否则放弃</p>
<p>感觉很依赖r<sub>max</sub> , 不确定是否准确</p></li>
</ol>
<h4 id="comparison-with-data">Comparison with Data</h4>
<ul>
<li><p>依据fano factor</p>
<p>&lt; n &gt; 和 σ<sub>n</sub><sup>2</sup> 是1:1的正比关系 , fitted to the equation <span class="math inline">\(\sigma_{n}^{2}=A\langle n\rangle^{B}\)</span> , A B 在1-1.5之间.如果稳定在1附近可以认为泊松过程是一个合理的近似</p>
<figure>
<img src="/2020/08/05/Neural%20Encoding%20I%20Firing%20Rates%20and%20spike%20statistics/fano%20factor.png" class="lazyload" data-srcset="/2020/08/05/Neural%20Encoding%20I%20Firing%20Rates%20and%20spike%20statistics/fano%20factor.png" srcset="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAABGdBTUEAALGPC/xhBQAAADhlWElmTU0AKgAAAAgAAYdpAAQAAAABAAAAGgAAAAAAAqACAAQAAAABAAAAAaADAAQAAAABAAAAAQAAAADa6r/EAAAAC0lEQVQIHWNgAAIAAAUAAY27m/MAAAAASUVORK5CYII=" alt><figcaption>image</figcaption>
</figure></li>
<li><p>依据C<sub>v</sub>(τ)</p>
<p>C<sub>v</sub>(τ) 通常是在1附近 , 由此可以绘制平均间隔时间τ与C<sub>v</sub>(τ)的关系. 如果在某个时间段, 数值接近于1, 表明这个时间段的τ变动负和泊松过程, 如果接近于0 ,表明这段时间的的间隔变动很固定,是受了某些因素的影响. 比如在间隔时间很短时存在不应期refractory period ,此时就接近0</p>
<p><img src="/2020/08/05/Neural%20Encoding%20I%20Firing%20Rates%20and%20spike%20statistics/coefficient%20tau.png" class="lazyload" data-srcset="/2020/08/05/Neural%20Encoding%20I%20Firing%20Rates%20and%20spike%20statistics/coefficient%20tau.png" srcset="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAABGdBTUEAALGPC/xhBQAAADhlWElmTU0AKgAAAAgAAYdpAAQAAAABAAAAGgAAAAAAAqACAAQAAAABAAAAAaADAAQAAAABAAAAAQAAAADa6r/EAAAAC0lEQVQIHWNgAAIAAAUAAY27m/MAAAAASUVORK5CYII=" alt="image"> The solid curve is the result of a Poisson model with a refractory period. (Adapted from Softky and Koch, 1992.)</p></li>
</ul>
<h3 id="some-concept">1.6.3. some concept</h3>
<ul>
<li><p>point process 计数过程</p></li>
<li><p>renewal process 事件的间隔时间独立同分布,后一个事件发生时间依赖于前一个事件发生时间</p></li>
<li><p>poisson process 事件发生完全不依赖于之前发生的事件</p></li>
<li><p>Homogeneous Poisson point process If a Poisson point process has a parameter of the form <span class="math inline">\({\displaystyle \textstyle \Lambda =\nu \lambda }\)</span>, where <span class="math inline">\({\displaystyle \textstyle \nu }\)</span> is Lebesgue measure (that is, it assigns length, area, or volume to sets) and <span class="math inline">\({\displaystyle \textstyle \lambda }\)</span> is a <strong>constant,</strong> then the point process is called a homogeneous or stationary Poisson point process.</p></li>
<li><p>Homogeneous Poisson point process</p>
<p>The inhomogeneous or nonhomogeneous Poisson point process (see Terminology) is a Poisson point process with a Poisson parameter set as some location-dependent function in the underlying space on which the Poisson process is defined. For Euclidean space <span class="math inline">\({\displaystyle \textstyle {\textbf {R}}^{d}}\)</span>, this is achieved by introducing a locally integrable positive function <span class="math inline">\({\displaystyle \textstyle \lambda (x)}\)</span> , where <span class="math inline">\({\displaystyle \textstyle x}\)</span> is a <span class="math inline">\({\displaystyle \textstyle d}\)</span> -dimensional point located in <span class="math inline">\({\displaystyle \textstyle {\textbf {R}}^{d}}\)</span>, such that for any bounded region {B}B the (<span class="math inline">\({\displaystyle \textstyle d}\)</span> volume integral of <span class="math inline">\({\displaystyle \textstyle \lambda (x)}\)</span> over region <span class="math inline">\({\displaystyle \textstyle B}\)</span> is finite. In other words, if this integral, denoted by <span class="math inline">\({\displaystyle \textstyle \Lambda (B)}\)</span>, is:</p>
<p><span class="math display">\[{\displaystyle \Lambda (B)=\int _{B}\lambda (x)\,\mathrm {d} x&lt;\infty ,}\]</span></p>
<p>where <span class="math inline">\({\displaystyle \textstyle {\mathrm {d} x}}\)</span> is a (<span class="math inline">\({\displaystyle \textstyle d}\)</span>-dimensional) volume element,[d] then for any collection of disjoint bounded Borel measurable sets <span class="math inline">\({\displaystyle \textstyle B_{1},\dots ,B_{k}}\)</span>, an inhomogeneous Poisson process with (intensity) function <span class="math inline">\({\displaystyle \textstyle \lambda (x)}\)</span>) has the finite-dimensional distribution:[75]</p>
<p><span class="math display">\[{\displaystyle P\{N(B_{i})=n_{i},i=1,\dots ,k\}=\prod _{i=1}^{k}{\frac {(\Lambda (B_{i}))^{n_{i}}}{n_{i}!}}e^{-\Lambda (B_{i})}.}\]</span></p></li>
<li><p><span class="math inline">\(p\left[t_{1}, t_{2}, \ldots, t_{n}\right] .\)</span></p>
<p>the probability <span class="math inline">\(P\left[t_{1}, t_{2}, \ldots, t_{n}\right]\)</span> that a sequence of <span class="math inline">\(n\)</span> spikes occurs with spike <span class="math inline">\(i\)</span> falling between times <span class="math inline">\(t_{i}\)</span> and <span class="math inline">\(t_{i}+\Delta t\)</span> for <span class="math inline">\(i=1,2, \ldots, n\)</span> is given in terms of this density by the relation <span class="math inline">\(P\left[t_{1}, t_{2}, \ldots, t_{n}\right]\)</span>=<span class="math inline">\(p\left[t_{1}, t_{2}, \ldots, t_{n}\right]\Delta t^{n})\)</span></p></li>
</ul>
<p>The nature of the neural code is a topic of intense debate within the neuroscience community. Much of the discussion has focused on whether neurons use <strong>rate coding</strong> or <strong>temporal coding,</strong> often without a clear definition of what these terms mean. We feel that the central issue in neural coding is whether individual action potentials and individual neurons encode independently of each other, or whether correlations between different spikes and different neurons carry significant amounts of information. We therefore contrast independent-spike and independent-neuron codes with cor- relation codes before addressing the issue of temporal coding.</p>
<ul>
<li><p>rate code</p>
<p>r (t) contains all the information about the stimulus that can be extracted from the spike train, and the neural code could reasonably be called a rate code.</p>
<ul>
<li><p>independent-spike code we will call a code based solely on the time-dependent firing rate independent-spike code. This refers to the fact that the generation of each spike is independent of all the other spikes in the train.</p></li>
<li><p>correlation code</p>
<p>If individual spikes do not encode independently of each other, we call the code a correlation code, because correlations between spike times may carry additional information</p></li>
</ul></li>
<li><p>Temporal Codes</p></li>
</ul>

  
  
    
    <div class='footer'>
      
      
      
        <div class='copyright'>
          <blockquote>
            
              
                <p>博客内容遵循 署名-非商业性使用-相同方式共享 4.0 国际 (CC BY-NC-SA 4.0) 协议</p>

              
            
              
                <p>本文永久链接是：<a href=http://yoursite.com/2020/08/05/Neural%20Encoding%20I%20Firing%20Rates%20and%20spike%20statistics/>http://yoursite.com/2020/08/05/Neural%20Encoding%20I%20Firing%20Rates%20and%20spike%20statistics/</a></p>
              
            
          </blockquote>
        </div>
      
      
    </div>
  
  
    


  <div class='article-meta' id="bottom">
    <div class='new-meta-box'>
      
        
          <div class="new-meta-item date" itemprop="dateUpdated" datetime="2020-08-06T03:02:00+08:00">
  <a class='notlink'>
    <i class="fas fa-edit fa-fw" aria-hidden="true"></i>
    <p>更新于：Aug 6, 2020</p>
  </a>
</div>

        
      
        
          
  
  <div class="new-meta-item meta-tags"><a class="tag" href="/tags/nuron/" rel="nofollow"><i class="fas fa-hashtag fa-fw" aria-hidden="true"></i><p>nuron</p></a></div>


        
      
        
          
  <div class="new-meta-item share -mob-share-list">
  <div class="-mob-share-list share-body">
    
      
        <a class="-mob-share-qq" title="" rel="external nofollow noopener noreferrer"
          
          href="http://connect.qq.com/widget/shareqq/index.html?url=http://yoursite.com/2020/08/05/Neural%20Encoding%20I%20Firing%20Rates%20and%20spike%20statistics/&title=Neural Encoding I Firing Rates and spike statistics - Eichide's Blog&summary=!!! note
1. Neural Encoding I Firing Rates and spike statistics
1.1. introduction

neural encode : stimulus --&gt; response
neural decode : response --&gt; stimulus , need reconstruct stimulus or certain aspects of stimuls
"
          
          >
          
            <img src="https://cdn.jsdelivr.net/gh/volantis-x/cdn-org/logo/128/qq.png" class="lazyload" data-srcset="https://cdn.jsdelivr.net/gh/volantis-x/cdn-org/logo/128/qq.png" srcset="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAABGdBTUEAALGPC/xhBQAAADhlWElmTU0AKgAAAAgAAYdpAAQAAAABAAAAGgAAAAAAAqACAAQAAAABAAAAAaADAAQAAAABAAAAAQAAAADa6r/EAAAAC0lEQVQIHWNgAAIAAAUAAY27m/MAAAAASUVORK5CYII=">
          
        </a>
      
    
      
        <a class="-mob-share-qzone" title="" rel="external nofollow noopener noreferrer"
          
          href="https://sns.qzone.qq.com/cgi-bin/qzshare/cgi_qzshare_onekey?url=http://yoursite.com/2020/08/05/Neural%20Encoding%20I%20Firing%20Rates%20and%20spike%20statistics/&title=Neural Encoding I Firing Rates and spike statistics - Eichide's Blog&summary=!!! note
1. Neural Encoding I Firing Rates and spike statistics
1.1. introduction

neural encode : stimulus --&gt; response
neural decode : response --&gt; stimulus , need reconstruct stimulus or certain aspects of stimuls
"
          
          >
          
            <img src="https://cdn.jsdelivr.net/gh/volantis-x/cdn-org/logo/128/qzone.png" class="lazyload" data-srcset="https://cdn.jsdelivr.net/gh/volantis-x/cdn-org/logo/128/qzone.png" srcset="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAABGdBTUEAALGPC/xhBQAAADhlWElmTU0AKgAAAAgAAYdpAAQAAAABAAAAGgAAAAAAAqACAAQAAAABAAAAAaADAAQAAAABAAAAAQAAAADa6r/EAAAAC0lEQVQIHWNgAAIAAAUAAY27m/MAAAAASUVORK5CYII=">
          
        </a>
      
    
      
        <a class="-mob-share-weibo" title="" rel="external nofollow noopener noreferrer"
          
          href="http://service.weibo.com/share/share.php?url=http://yoursite.com/2020/08/05/Neural%20Encoding%20I%20Firing%20Rates%20and%20spike%20statistics/&title=Neural Encoding I Firing Rates and spike statistics - Eichide's Blog&summary=!!! note
1. Neural Encoding I Firing Rates and spike statistics
1.1. introduction

neural encode : stimulus --&gt; response
neural decode : response --&gt; stimulus , need reconstruct stimulus or certain aspects of stimuls
"
          
          >
          
            <img src="https://cdn.jsdelivr.net/gh/volantis-x/cdn-org/logo/128/weibo.png" class="lazyload" data-srcset="https://cdn.jsdelivr.net/gh/volantis-x/cdn-org/logo/128/weibo.png" srcset="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAABGdBTUEAALGPC/xhBQAAADhlWElmTU0AKgAAAAgAAYdpAAQAAAABAAAAGgAAAAAAAqACAAQAAAABAAAAAaADAAQAAAABAAAAAQAAAADa6r/EAAAAC0lEQVQIHWNgAAIAAAUAAY27m/MAAAAASUVORK5CYII=">
          
        </a>
      
    
      
    
      
    
  </div>
</div>



        
      
    </div>
  </div>


  
  

  
    <div class="prev-next">
      
        <a class='prev' href='/2020/08/05/PuMuMingnote_ch10/'>
          <p class='title'><i class="fas fa-chevron-left" aria-hidden="true"></i>PuMUming neuron note -- ch10 time keep</p>
          <p class='content'>Title neural basic of neuron
Francis Crick : in memory 1907-2004
consciousness(psdt)
the havin...</p>
        </a>
      
      
        <a class='next' href='/2020/08/05/hello-world/'>
          <p class='title'>Hello World<i class="fas fa-chevron-right" aria-hidden="true"></i></p>
          <p class='content'>Welcome to Hexo! This is your very first post. Check documentation for more info. If you get any ...</p>
        </a>
      
    </div>
  
</article>


  

  <article class="post white-box reveal shadow" id="comments">
    <p ct><i class='fas fa-comments'></i> 评论</p>
    
    <div id="valine_container" class="valine_thread">
  <i class="fas fa-cog fa-spin fa-fw fa-2x"></i>
</div>

  </article>





  <script>
  // https://github.com/theme-next/hexo-theme-next/blob/master/layout/_third-party/math/mathjax.swig
  if (typeof MathJax === 'undefined') {
    window.MathJax = {
      loader: {
        source: {
          '[tex]/amsCd': '[tex]/amscd',
          '[tex]/AMScd': '[tex]/amscd'
        }
      },
      tex: {
        inlineMath: {'[+]': [['$', '$']]},
        tags: 'ams'
      },
      options: {
        renderActions: {
          findScript: [10, doc => {
            document.querySelectorAll('script[type^="math/tex"]').forEach(node => {
              const display = !!node.type.match(/; *mode=display/);
              const math = new doc.options.MathItem(node.textContent, doc.inputJax[0], display);
              const text = document.createTextNode('');
              node.parentNode.replaceChild(text, node);
              math.start = {node: text, delim: '', n: 0};
              math.end = {node: text, delim: '', n: 0};
              doc.math.push(math);
            });
          }, '', false],
          insertedScript: [200, () => {
            document.querySelectorAll('mjx-container').forEach(node => {
              let target = node.parentNode;
              if (target.nodeName.toLowerCase() === 'li') {
                target.parentNode.classList.add('has-jax');
              }
            });
          }, '', false]
        }
      }
    };
    (function () {
      var script = document.createElement('script');
      script.src = 'https://cdn.jsdelivr.net/npm/mathjax@3.0/es5/tex-mml-chtml.js';
      script.defer = true;
      document.head.appendChild(script);
    })();
  } else {
    // 文章章节标题不能为 “MathJax” ，否则会报错。
    MathJax.startup.document.state(0);
    MathJax.texReset();
    MathJax.typeset();
  }
</script>



</div>
<aside class='l_side'>
  
  
    
    



  <section class="widget toc-wrapper shadow desktop mobile" id="toc-div" >
    
  <header>
    
      <i class="fas fa-list fa-fw" aria-hidden="true"></i><span class='name'>本文目录</span>
    
  </header>


    <div class='content'>
        <ol class="toc"><li class="toc-item toc-level-2"><a class="toc-link" href="#introduction"><span class="toc-text">1.1. introduction</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#recording-neuronal-responses"><span class="toc-text">1.2. Recording Neuronal Responses</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#from-stimulus-to-response"><span class="toc-text">1.3. From stimulus to response</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#fire-pattern"><span class="toc-text">1.3.1. fire pattern</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#spike-trains-and-firing-rates"><span class="toc-text">1.4. Spike Trains and Firing Rates</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#spike-rate"><span class="toc-text">1.4.1. spike rate</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#firing-rate-spike-count-rate-and-average-firing-rate"><span class="toc-text">“firing rate”, “spike-count rate”, and “average firing rate”</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#measuring-firing-rates---rt"><span class="toc-text">1.4.2. Measuring Firing Rates --r(t)</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#turning-curve"><span class="toc-text">1.4.3. turning curve</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#what-make-a-neuron-fire"><span class="toc-text">1.5. What make a neuron fire</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#spike-train-statistics"><span class="toc-text">1.6. Spike-Train Statistics</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#homogeneous-poisson-process"><span class="toc-text">1.6.1. Homogeneous Poisson Process</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#inhomogeneous-poisson-process"><span class="toc-text">1.6.2. Inhomogeneous Poisson Process</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#generating-poisson-spike-train"><span class="toc-text">Generating Poisson Spike Train</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#poisson-spike-generator"><span class="toc-text">poisson spike generator</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#comparison-with-data"><span class="toc-text">Comparison with Data</span></a></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#some-concept"><span class="toc-text">1.6.3. some concept</span></a></li></ol></li></ol>
    </div>
  </section>


  


</aside>



      </div>
      
  
  <footer class="footer clearfix">
    <br><br>
    
      
        <div class="aplayer-container">
          


        </div>
      
    
      
        <br>
        <div class="social-wrapper">
          
            
              <a href="/atom.xml"
                class="social  flat-btn"
                target="_blank"
                rel="external nofollow noopener noreferrer">
                
                  <img src="https://cdn.jsdelivr.net/gh/volantis-x/cdn-org@1.1/icon/1322024-social-media/020-rss.svg" class="lazyload" data-srcset="https://cdn.jsdelivr.net/gh/volantis-x/cdn-org@1.1/icon/1322024-social-media/020-rss.svg" srcset="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAABGdBTUEAALGPC/xhBQAAADhlWElmTU0AKgAAAAgAAYdpAAQAAAABAAAAGgAAAAAAAqACAAQAAAABAAAAAaADAAQAAAABAAAAAQAAAADa6r/EAAAAC0lEQVQIHWNgAAIAAAUAAY27m/MAAAAASUVORK5CYII="/>
                
              </a>
            
          
            
          
            
              <a href="https://github.com/volantis-x/"
                class="social  flat-btn"
                target="_blank"
                rel="external nofollow noopener noreferrer">
                
                  <img src="https://cdn.jsdelivr.net/gh/volantis-x/cdn-org@1.1/icon/1322024-social-media/029-github.svg" class="lazyload" data-srcset="https://cdn.jsdelivr.net/gh/volantis-x/cdn-org@1.1/icon/1322024-social-media/029-github.svg" srcset="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAABGdBTUEAALGPC/xhBQAAADhlWElmTU0AKgAAAAgAAYdpAAQAAAABAAAAGgAAAAAAAqACAAQAAAABAAAAAaADAAQAAAABAAAAAQAAAADa6r/EAAAAC0lEQVQIHWNgAAIAAAUAAY27m/MAAAAASUVORK5CYII="/>
                
              </a>
            
          
            
              <a href="/"
                class="social  flat-btn"
                target="_blank"
                rel="external nofollow noopener noreferrer">
                
                  <img src="https://cdn.jsdelivr.net/gh/volantis-x/cdn-org@1.1/icon/1322024-social-media/010-facebook.svg" class="lazyload" data-srcset="https://cdn.jsdelivr.net/gh/volantis-x/cdn-org@1.1/icon/1322024-social-media/010-facebook.svg" srcset="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAABGdBTUEAALGPC/xhBQAAADhlWElmTU0AKgAAAAgAAYdpAAQAAAABAAAAGgAAAAAAAqACAAQAAAABAAAAAaADAAQAAAABAAAAAQAAAADa6r/EAAAAC0lEQVQIHWNgAAIAAAUAAY27m/MAAAAASUVORK5CYII="/>
                
              </a>
            
          
            
              <a href="/"
                class="social  flat-btn"
                target="_blank"
                rel="external nofollow noopener noreferrer">
                
                  <img src="https://cdn.jsdelivr.net/gh/volantis-x/cdn-org@1.1/icon/1322024-social-media/018-twitter.svg" class="lazyload" data-srcset="https://cdn.jsdelivr.net/gh/volantis-x/cdn-org@1.1/icon/1322024-social-media/018-twitter.svg" srcset="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAABGdBTUEAALGPC/xhBQAAADhlWElmTU0AKgAAAAgAAYdpAAQAAAABAAAAGgAAAAAAAqACAAQAAAABAAAAAaADAAQAAAABAAAAAQAAAADa6r/EAAAAC0lEQVQIHWNgAAIAAAUAAY27m/MAAAAASUVORK5CYII="/>
                
              </a>
            
          
            
              <a href="/"
                class="social  flat-btn"
                target="_blank"
                rel="external nofollow noopener noreferrer">
                
                  <img src="https://cdn.jsdelivr.net/gh/volantis-x/cdn-org@1.1/icon/1322024-social-media/045-telegram.svg" class="lazyload" data-srcset="https://cdn.jsdelivr.net/gh/volantis-x/cdn-org@1.1/icon/1322024-social-media/045-telegram.svg" srcset="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAABGdBTUEAALGPC/xhBQAAADhlWElmTU0AKgAAAAgAAYdpAAQAAAABAAAAGgAAAAAAAqACAAQAAAABAAAAAaADAAQAAAABAAAAAQAAAADa6r/EAAAAC0lEQVQIHWNgAAIAAAUAAY27m/MAAAAASUVORK5CYII="/>
                
              </a>
            
          
            
              <a href="/"
                class="social  flat-btn"
                target="_blank"
                rel="external nofollow noopener noreferrer">
                
                  <img src="https://cdn.jsdelivr.net/gh/volantis-x/cdn-org@1.1/icon/1322024-social-media/006-youtube.svg" class="lazyload" data-srcset="https://cdn.jsdelivr.net/gh/volantis-x/cdn-org@1.1/icon/1322024-social-media/006-youtube.svg" srcset="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAABGdBTUEAALGPC/xhBQAAADhlWElmTU0AKgAAAAgAAYdpAAQAAAABAAAAGgAAAAAAAqACAAQAAAABAAAAAaADAAQAAAABAAAAAQAAAADa6r/EAAAAC0lEQVQIHWNgAAIAAAUAAY27m/MAAAAASUVORK5CYII="/>
                
              </a>
            
          
            
          
            
          
            
          
            
          
            
          
        </div>
      
    
      
        <div><p>Blog content follows the <a href="https://creativecommons.org/licenses/by-nc-sa/4.0/deed.en">Attribution-NonCommercial-ShareAlike 4.0 International (CC BY-NC-SA 4.0) License</a></p>
</div>
      
    
      
        
          <div><p><span id="lc-sv">本站总访问量为 <span id="number"><i class="fas fa-circle-notch fa-spin fa-fw" aria-hidden="true"></i></span> 次</span> <span id="lc-uv">访客数为 <span id="number"><i class="fas fa-circle-notch fa-spin fa-fw" aria-hidden="true"></i></span> 人</span></p>
</div>
        
      
    
      
        Use
        <a href="https://github.com/volantis-x/hexo-theme-volantis/tree/4.0.0-rc.2" target="_blank" class="codename">Volantis</a>
        as theme
      
    
      
        <div class='copyright'>
        <p><a href="/">Copyright © 2017-2020 XXX</a></p>

        </div>
      
    
  </footer>



  <script src='https://unpkg.com/mermaid@7.1.2/dist/mermaid.min.js'></script>
  <script>
    if (window.mermaid) {
      mermaid.initialize({theme: 'forest'});
    }
  </script>

      <a class="s-top fas fa-arrow-up fa-fw" href='javascript:void(0)'></a>
    </div>
  </div>
  <div>
    <!-- required -->

<script src="https://cdn.jsdelivr.net/npm/jquery@3.5/dist/jquery.min.js"></script>

<script>
  function pjax_fancybox() {
    $(".md").find("img").not('.inline').not('a img').each(function () { //渲染 fancybox
      var element = document.createElement("a"); // a 标签
      $(element).attr("class", "fancybox");
      $(element).attr("pjax-fancybox", "");  // 过滤 pjax
      $(element).attr("href", $(this).attr("src"));
      if ($(this).attr("data-original")) {
        $(element).attr("href", $(this).attr("data-original"));
      }
      $(element).attr("data-fancybox", "images");
      var caption = "";   // 描述信息
      if ($(this).attr('alt')) {  // 判断当前页面是否存在描述信息
        $(element).attr('data-caption', $(this).attr('alt'));
        caption = $(this).attr('alt');
      }
      var div = document.createElement("div");
      $(div).addClass("fancybox");
      $(this).wrap(div); // 最外层套 div ，其实主要作用还是 class 样式
      var span = document.createElement("span");
      $(span).addClass("image-caption");
      $(span).text(caption); // 加描述
      $(this).after(span);  // 再套一层描述
      // 背景层
      var bgDiv = document.createElement("div");
      $(bgDiv).addClass("bg");
      if ($(this).attr('bg')) {
        $(bgDiv).css('background', $(this).attr('bg'));
      }
      $(this).wrap(bgDiv); // 背景层
      $(this).wrap(element);  // 最后套 a 标签
    })
    $(".md").find("img").fancybox({
      selector: '[data-fancybox="images"]',
      hash: false,
      loop: false,
      closeClick: true,
      helpers: {
        overlay: {closeClick: true}
      },
      buttons: [
        "zoom",
        "close"
      ]
    });
  };
  function SCload_fancybox() {
    if($(".md").find("img").not('.inline').not('a img').length+$(".article-entry").find("img").length==0)return;
    loadCSS("https://cdn.jsdelivr.net/npm/@fancyapps/fancybox@3.5.7/dist/jquery.fancybox.min.css", document.getElementById("loadcss"));
    setTimeout(function() {
      loadScript('https://cdn.jsdelivr.net/gh/fancyapps/fancybox@3.5.7/dist/jquery.fancybox.min.js', pjax_fancybox)
    }, 1);
  };
  $(function () {
    SCload_fancybox();
  });
</script>


<!-- internal -->




<!-- optional -->

  <script>
  
  var SEARCH_SERVICE = "hexo" || "hexo";
  var ROOT = "/" || "/";
  if (!ROOT.endsWith('/')) ROOT += '/';
</script>






  <script defer src="https://cdn.jsdelivr.net/npm/vanilla-lazyload@17.1.0/dist/lazyload.min.js"></script>
<script>
  // https://www.npmjs.com/package/vanilla-lazyload
  // Set the options globally
  // to make LazyLoad self-initialize
  window.lazyLoadOptions = {
    elements_selector: ".lazyload",
    threshold: 0
  };
  // Listen to the initialization event
  // and get the instance of LazyLoad
  window.addEventListener(
    "LazyLoad::Initialized",
    function (event) {
      window.lazyLoadInstance = event.detail.instance;
    },
    false
  );
  document.addEventListener('DOMContentLoaded', function () {
    lazyLoadInstance.update();
  });
  document.addEventListener('pjax:complete', function () {
    lazyLoadInstance.update();
  });
</script>




  
  
    <script>
      window.FPConfig = {
        delay: 0,
        ignoreKeywords: [],
        maxRPS: 5,
        hoverDelay: 25
      };
    </script>
    <script defer src="https://cdn.jsdelivr.net/gh/gijo-varghese/flying-pages@2.1.2/flying-pages.min.js"></script>
  










  
  
<script src="/js/valine.js"></script>


<script>
  var GUEST_INFO = ['nick', 'mail', 'link'];
  var meta = 'nick,mail,link'.split(',').filter(function (item) {
    return GUEST_INFO.indexOf(item) > -1
  });
  var REQUIRED_FIELDS = ['nick', 'mail', 'link'];
  var requiredFields = 'nick,mail'.split(',').filter(function (item) {
    return REQUIRED_FIELDS.indexOf(item) > -1
  });

  function emoji(path, idx, ext) {
    return path + "/" + path + "-" + idx + "." + ext;
  }

  var emojiMaps = {};
  for (var i = 1; i <= 54; i++) {
    emojiMaps['tieba-' + i] = emoji('tieba', i, 'png');
  }
  for (var i = 1; i <= 101; i++) {
    emojiMaps['qq-' + i] = emoji('qq', i, 'gif');
  }
  for (var i = 1; i <= 116; i++) {
    emojiMaps['aru-' + i] = emoji('aru', i, 'gif');
  }
  for (var i = 1; i <= 125; i++) {
    emojiMaps['twemoji-' + i] = emoji('twemoji', i, 'png');
  }
  for (var i = 1; i <= 4; i++) {
    emojiMaps['weibo-' + i] = emoji('weibo', i, 'png');
  }

  function pjax_valine() {
    if(!document.querySelectorAll("#valine_container")[0])return;

    let pagePlaceholder = $.trim($('#pjax-comment-placeholder').text()) || "快来评论吧~";

    let path = $.trim($('#pjax-comment-path').text());
    if (path.length == 0) {
      let defaultPath = '';
      path = defaultPath || decodeURI(window.location.pathname);
    }

    var valine = new Valine();
    valine.init({
      el: '#valine_container',
      meta: meta,
      placeholder: pagePlaceholder,
      path: path,
      appId: "",
      appKey: "",
      pageSize: '10',
      avatar: 'robohash',
      lang: 'zh-cn',
      visitor: 'true',
      highlight: 'true',
      mathJax: 'false',
      enableQQ: 'true',
      requiredFields: requiredFields,
      emojiCDN: 'https://cdn.jsdelivr.net/gh/volantis-x/cdn-emoji/valine/',
      emojiMaps: emojiMaps
    })
  }

  $(function () {
    pjax_valine();
  });
</script>







  
<script src="/js/app.js"></script>




  
    
<script src="/js/search.js"></script>

  










  <script defer>

  const LCCounter = {
    app_id: 'u9j57bwJod4EDmXWdxrwuqQT-MdYXbMMI',
    app_key: 'jfHtEKVE24j0IVCGHbvuFClp',
    custom_api_server: '',

    // 查询存储的记录
    getRecord(Counter, url, title) {
      return new Promise(function (resolve, reject) {
        Counter('get', '/classes/Counter?where=' + encodeURIComponent(JSON.stringify({url})))
          .then(resp => resp.json())
          .then(({results, code, error}) => {
            if (code === 401) {
              throw error;
            }
            if (results && results.length > 0) {
              var record = results[0];
              resolve(record);
            } else {
              Counter('post', '/classes/Counter', {url, title: title, times: 0})
                .then(resp => resp.json())
                .then((record, error) => {
                  if (error) {
                    throw error;
                  }
                  resolve(record);
                }).catch(error => {
                console.error('Failed to create', error);
                reject(error);
              });
            }
          }).catch((error) => {
          console.error('LeanCloud Counter Error:', error);
          reject(error);
        });
      })
    },

    // 发起自增请求
    increment(Counter, incrArr) {
      return new Promise(function (resolve, reject) {
        Counter('post', '/batch', {
          "requests": incrArr
        }).then((res) => {
          res = res.json();
          if (res.error) {
            throw res.error;
          }
          resolve(res);
        }).catch((error) => {
          console.error('Failed to save visitor count', error);
          reject(error);
        });
      });
    },

    // 构建自增请求体
    buildIncrement(objectId) {
      return {
        "method": "PUT",
        "path": `/1.1/classes/Counter/${ objectId }`,
        "body": {
          "times": {
            '__op': 'Increment',
            'amount': 1
          }
        }
      }
    },

    // 校验是否为有效的 UV
    validUV() {
      var key = 'LeanCloudUVTimestamp';
      var flag = localStorage.getItem(key);
      if (flag) {
        // 距离标记小于 24 小时则不计为 UV
        if (new Date().getTime() - parseInt(flag) <= 86400000) {
          return false;
        }
      }
      localStorage.setItem(key, new Date().getTime().toString());
      return true;
    },

    addCount(Counter) {
      var enableIncr = '' === 'true' && window.location.hostname !== 'localhost';
      enableIncr = true;
      var getterArr = [];
      var incrArr = [];
      // 请求 PV 并自增
      var pvCtn = document.querySelector('#lc-sv');
      if (pvCtn || enableIncr) {
        var pvGetter = this.getRecord(Counter, 'http://yoursite.com' + '/#lc-sv', 'Visits').then((record) => {
          incrArr.push(this.buildIncrement(record.objectId))
          var eles = document.querySelectorAll('#lc-sv #number');
          if (eles.length > 0) {
            eles.forEach((el,index,array)=>{
              el.innerText = record.times + 1;
              if (pvCtn) {
                pvCtn.style.display = 'inline';
              }
            })
          }
        });
        getterArr.push(pvGetter);
      }

      // 请求 UV 并自增
      var uvCtn = document.querySelector('#lc-uv');
      if (uvCtn || enableIncr) {
        var uvGetter = this.getRecord(Counter, 'http://yoursite.com' + '/#lc-uv', 'Visitors').then((record) => {
          var vuv = this.validUV();
          vuv && incrArr.push(this.buildIncrement(record.objectId))
          var eles = document.querySelectorAll('#lc-uv #number');
          if (eles.length > 0) {
            eles.forEach((el,index,array)=>{
              el.innerText = record.times + (vuv ? 1 : 0);
              if (uvCtn) {
                uvCtn.style.display = 'inline';
              }
            })
          }
        });
        getterArr.push(uvGetter);
      }

      // 请求文章的浏览数，如果是当前页面就自增
      var allPV = document.querySelectorAll('#lc-pv');
      if (allPV.length > 0 || enableIncr) {
        for (i = 0; i < allPV.length; i++) {
          let pv = allPV[i];
          let title = pv.getAttribute('data-title');
          var url = 'http://yoursite.com' + pv.getAttribute('data-path');
          if (url) {
            var viewGetter = this.getRecord(Counter, url, title).then((record) => {
              // 是当前页面就自增
              if (pv.getAttribute('data-path') == window.location.pathname) {
                incrArr.push(this.buildIncrement(record.objectId));
              }
              if (pv) {
                var ele = pv.querySelector('#lc-pv #number');
                if (ele) {
                  if (pv.getAttribute('data-path') == window.location.pathname) {
                    ele.innerText = (record.times || 0) + 1;
                  } else {
                    ele.innerText = record.times || 0;
                  }
                  pv.style.display = 'inline';
                }
              }
            });
            getterArr.push(viewGetter);
          }
        }
      }

      // 如果启动计数自增，批量发起自增请求
      if (enableIncr) {
        Promise.all(getterArr).then(() => {
          incrArr.length > 0 && this.increment(Counter, incrArr);
        })
      }

    },


    fetchData(api_server) {
      var Counter = (method, url, data) => {
        return fetch(`${ api_server }/1.1${ url }`, {
          method,
          headers: {
            'X-LC-Id': this.app_id,
            'X-LC-Key': this.app_key,
            'Content-Type': 'application/json',
          },
          body: JSON.stringify(data)
        });
      };
      this.addCount(Counter);
    },

    refreshCounter() {
      var api_server = this.app_id.slice(-9) !== '-MdYXbMMI' ? this.custom_api_server : `https://${ this.app_id.slice(0, 8).toLowerCase() }.api.lncldglobal.com`;
      if (api_server) {
        this.fetchData(api_server);
      } else {
        fetch('https://app-router.leancloud.cn/2/route?appId=' + this.app_id)
          .then(resp => resp.json())
          .then(({api_server}) => {
            this.fetchData('https://' + api_server);
          });
      }
    }

  };

  LCCounter.refreshCounter();

  document.addEventListener('pjax:complete', function () {
    LCCounter.refreshCounter();
  });
</script>



<!-- more -->


    
      


<script src="https://cdn.jsdelivr.net/npm/pjax@0.2.8/pjax.min.js"></script>

<!-- 样式位于：source/css/_third-party/pjaxanimate.styl -->

<div class="pjax-animate">
  
    <script src="https://cdn.jsdelivr.net/npm/nprogress@0.2.0/nprogress.min.js"></script>
    <div id="loading-bar-wrapper"><script>NProgress.configure({parent:"#loading-bar-wrapper",trickleSpeed: 100})</script></div>
    <script>
      window.ShowLoading = function() {
        NProgress.start();
      };
      window.HideLoading = function() {
        NProgress.done();
      }
    </script>
  
</div>

<script>
    var pjax;
    document.addEventListener('DOMContentLoaded', function () {
      pjax = new Pjax({
        elements: 'a[href]:not([href^="#"]):not([href="javascript:void(0)"]):not([pjax-fancybox])',
        selectors: [
          "title",
          "#pjax-container",
          "#pjax-header-nav-list"
        ],
        cacheBust: false,   // url 地址追加时间戳，用以避免浏览器缓存
        timeout: 5000
      });
    });

    document.addEventListener('pjax:send', function (e) {
      window.stop(); // 相当于点击了浏览器的停止按钮

      try {
        var currentUrl = window.location.pathname;
        var targetUrl = e.triggerElement.href;
        var banUrl = [""];
        if (banUrl[0] != "") {
          banUrl.forEach(item => {
            if(currentUrl.indexOf(item) != -1 || targetUrl.indexOf(item) != -1) {
              window.location.href = targetUrl;
            }
          });
        }
      } catch (error) {}

      window.subData = null; // 移除标题（用于一二级导航栏切换处）
      $.fancybox.close();    // 关闭弹窗
      $('.l_header .switcher .s-search').removeClass('active'); // 关闭移动端激活的搜索框
      $('.l_header').removeClass('z_search-open'); // 关闭移动端激活的搜索框
      $('.wrapper').removeClass('sub'); // 跳转页面时关闭二级导航

      // 解绑事件 避免重复监听
      $('.s-top').unbind('click');
      $('.menu a').unbind('click');
      $(window).unbind('resize');
      $(window).unbind('scroll');
      $(document).unbind('scroll');
      $(document).unbind('click');
      $('body').unbind('click');
      window.ShowLoading();
    });

    document.addEventListener('pjax:complete', function () {
      // 关于百度统计对 SPA 页面的处理：
      // 方案一：百度统计>管理>单页应用设置中，打开开启按钮即可对SPA进行统计。 https://tongji.baidu.com/web/help/article?id=324
      // 方案二：取消注释下列代码。 https://tongji.baidu.com/web/help/article?id=235
      // 

      // 关于谷歌统计对 SPA 页面的处理：
      // 当应用以动态方式加载内容并更新地址栏中的网址时，也应该更新通过 gtag.js 存储的网页网址。
      // https://developers.google.cn/analytics/devguides/collection/gtagjs/single-page-applications?hl=zh-cn
      

      $('.nav-main').find('.list-v').not('.menu-phone').removeAttr("style",""); // 移除小尾巴的移除
      $('.menu-phone.list-v').removeAttr("style",""); // 移除小尾巴的移除
      $('script[data-pjax], .pjax-reload script').each(function () {
        $(this).parent().append($(this).remove());
      });
      try{
          if (typeof $.fancybox == "undefined") {
            SCload_fancybox();
          } else {
            pjax_fancybox();
          }
        
        
        
        
        
          pjax_valine();
        
        
        
        
        
      } catch (e) {
        console.log(e);
      }
      window.HideLoading();
    });

    document.addEventListener('pjax:error', function (e) {
      window.HideLoading();
      window.location.href = e.triggerElement.href;
    });
</script>

    
  </div>
</body>
</html>
